(()=>{class e{constructor(){this.features=new Map,this.loadFeatureDatabase()}loadFeatureDatabase(){[{id:"dialog-api",pattern:/\.showModal\(\)|<dialog|HTMLDialogElement/i,name:"HTML Dialog API",status:"newly-available",baseline:"2022-03-14",browsers:{chrome:"37+",firefox:"98+",safari:"15.4+",edge:"79+"},polyfill:"dialog-polyfill",fallback:"Modal div with ARIA attributes",mdn:"https://developer.mozilla.org/docs/Web/HTML/Element/dialog"},{id:"array-at",pattern:/\.at\s*\(\s*-?\d+\s*\)/,name:"Array.prototype.at()",status:"widely-available",baseline:"2022-01-15",browsers:{chrome:"92+",firefox:"90+",safari:"15.4+",edge:"92+"},fallback:"array[array.length - 1] or array.slice(-1)[0]",mdn:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/at"},{id:"optional-chaining",pattern:/\?\./,name:"Optional Chaining (?.)",status:"widely-available",baseline:"2020-04-21",browsers:{chrome:"80+",firefox:"72+",safari:"13.1+",edge:"80+"},fallback:"Manual null/undefined checks",mdn:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/Optional_chaining"},{id:"nullish-coalescing",pattern:/\?\?/,name:"Nullish Coalescing (??)",status:"widely-available",baseline:"2020-04-21",browsers:{chrome:"80+",firefox:"72+",safari:"13.1+",edge:"80+"},fallback:"value != null ? value : defaultValue",mdn:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator"},{id:"temporal-api",pattern:/Temporal\./,name:"Temporal API",status:"unsupported",baseline:null,browsers:{chrome:"None",firefox:"None",safari:"None",edge:"None"},polyfill:"@js-temporal/polyfill",mdn:"https://tc39.es/proposal-temporal/"},{id:"object-hasown",pattern:/Object\.hasOwn\(/,name:"Object.hasOwn()",status:"newly-available",baseline:"2022-01-15",browsers:{chrome:"93+",firefox:"92+",safari:"15.4+",edge:"93+"},fallback:"Object.prototype.hasOwnProperty.call()",mdn:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn"},{id:"container-queries",pattern:/@container|container-type:|container-name:/i,name:"CSS Container Queries",status:"newly-available",baseline:"2023-02-14",browsers:{chrome:"105+",firefox:"110+",safari:"16.0+",edge:"105+"},fallback:"Media queries with JavaScript",mdn:"https://developer.mozilla.org/docs/Web/CSS/CSS_Container_Queries"},{id:"css-has",pattern:/:has\(/i,name:"CSS :has() Selector",status:"newly-available",baseline:"2023-12-18",browsers:{chrome:"105+",firefox:"121+",safari:"15.4+",edge:"105+"},fallback:"JavaScript-based selection",mdn:"https://developer.mozilla.org/docs/Web/CSS/:has"},{id:"css-nesting",pattern:/&\s*[:{\.\#]/,name:"CSS Nesting",status:"newly-available",baseline:"2023-03-28",browsers:{chrome:"112+",firefox:"117+",safari:"16.5+",edge:"112+"},fallback:"Sass/SCSS preprocessing",mdn:"https://developer.mozilla.org/docs/Web/CSS/CSS_Nesting"},{id:"fetch-api",pattern:/fetch\s*\(/,name:"Fetch API",status:"widely-available",baseline:"2017-03-01",browsers:{chrome:"42+",firefox:"39+",safari:"10.1+",edge:"14+"},fallback:"XMLHttpRequest or axios library",mdn:"https://developer.mozilla.org/docs/Web/API/Fetch_API"}].forEach(e=>{this.features.set(e.id,e)})}analyzeCode(e){const t=[],n=e.split("\n");return this.features.forEach((e,a)=>{n.forEach((n,s)=>{const o=n.match(e.pattern);o&&t.push({id:a,feature:e.name,line:s+1,column:n.indexOf(o[0])+1,code:n.trim(),status:e.status,baseline:e.baseline,browsers:e.browsers,polyfill:e.polyfill,fallback:e.fallback,mdn:e.mdn,severity:this.getSeverity(e.status),matchedText:o[0]})})}),this.enrichResults(t,e)}getSeverity(e){return{"widely-available":"info","newly-available":"warning",limited:"warning",unsupported:"error"}[e]||"info"}enrichResults(e,t){const n=this.calculateRiskScore(e),a=this.groupBySeverity(e),s=this.generateSuggestions(e);return{summary:{total:e.length,riskScore:n,riskLevel:this.getRiskLevel(n),breakdown:a,compatibilityScore:Math.max(0,100-n)},issues:e,suggestions:s,metadata:{analyzedAt:(new Date).toISOString(),linesOfCode:t.split("\n").length,charactersCount:t.length}}}calculateRiskScore(e){let t=0;return e.forEach(e=>{switch(e.severity){case"error":t+=15;break;case"warning":t+=5;break;case"info":t+=1}}),Math.min(100,t)}getRiskLevel(e){return e>=40?"high":e>=15?"medium":"low"}groupBySeverity(e){return e.reduce((e,t)=>(e[t.severity]=(e[t.severity]||0)+1,e),{})}generateSuggestions(e){const t=[],n=e.filter(e=>"error"===e.severity).length,a=e.filter(e=>"warning"===e.severity).length;n>0&&t.push({type:"error",message:"".concat(n," unsupported feature").concat(n>1?"s":""," may break in older browsers"),action:"Add polyfills or implement fallbacks"}),a>2&&t.push({type:"warning",message:"".concat(a," newly available features detected"),action:"Verify against your browser support requirements"});const s=e.filter(e=>e.polyfill).length;return s>0&&t.push({type:"fix",message:"".concat(s," feature").concat(s>1?"s have":" has"," polyfill options available"),action:"Consider adding recommended polyfills"}),t}}class t{constructor(){this.analyzer=new e,this.currentAnalysis=null,this.templates=this.initializeTemplates(),this.initializeApp()}initializeTemplates(){return{"modern-js":"// Modern JavaScript Features Demo\nconst data = { user: { profile: { name: 'John' } } };\n\n// Dialog API\nconst dialog = document.querySelector('dialog');\nif (dialog?.showModal) {\n    dialog.showModal();\n}\n\n// Array methods\nconst items = ['apple', 'banana', 'cherry'];\nconst lastItem = items.at(-1);\n\n// Optional chaining & nullish coalescing\nconst userName = data?.user?.profile?.name ?? 'Anonymous';\n\n// Object.hasOwn()\nif (Object.hasOwn(data, 'user')) {\n    console.log('User exists');\n}\n\n// Temporal API (experimental)\nif (typeof Temporal !== 'undefined') {\n    const now = Temporal.Now.instant();\n    console.log(now.toString());\n}\n\n// Fetch with modern error handling\ntry {\n    const response = await fetch('/api/data');\n    const result = await response.json();\n} catch (error) {\n    console.error('Fetch failed:', error);\n}","css-features":"/* Modern CSS Features Demo */\n/* Container Queries */\n.card-container {\n    container-type: inline-size;\n}\n\n@container (min-width: 300px) {\n    .card {\n        display: flex;\n    }\n}\n\n/* CSS Nesting */\n.navigation {\n    background: blue;\n    \n    & ul {\n        list-style: none;\n        \n        & li {\n            padding: 0.5rem;\n            \n            & a {\n                text-decoration: none;\n                color: white;\n                \n                &:hover {\n                    color: yellow;\n                }\n            }\n        }\n    }\n}\n\n/* :has() selector */\n.form:has(input:invalid) {\n    border: 2px solid red;\n}\n\n.card:has(img) {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n}\n\n/* Logical properties */\n.content {\n    margin-inline: 1rem;\n    padding-block: 2rem;\n    border-inline-start: 2px solid blue;\n}","html5-features":'<!DOCTYPE html>\n<html>\n<head>\n    <title>Modern HTML Demo</title>\n</head>\n<body>\n    <dialog id="modal">\n        <form method="dialog">\n            <p>This is a native HTML dialog!</p>\n            <button>Close</button>\n        </form>\n    </dialog>\n    \n    <details>\n        <summary>Click to expand</summary>\n        <p>Hidden content here</p>\n    </details>\n    \n    <form>\n        <input type="date" name="birthday">\n        <input type="color" name="theme">\n        <input type="range" min="0" max="100" name="volume">\n        <input type="email" name="email" required>\n    </form>\n    \n    <picture>\n        <source media="(min-width: 800px)" srcset="large.jpg">\n        <source media="(min-width: 400px)" srcset="medium.jpg">\n        <img src="small.jpg" alt="Responsive image">\n    </picture>\n    \n    <script>\n        // Use the dialog\n        const dialog = document.querySelector(\'dialog\');\n        if (dialog?.showModal) {\n            // Modern browser\n            dialog.showModal();\n        }\n    <\/script>\n</body>\n</html>'}}initializeApp(){this.setupEventListeners(),this.updateStats(),setTimeout(()=>this.analyzeCode(),500)}setupEventListeners(){const e=document.getElementById("analyze-code"),t=document.getElementById("code-input"),n=document.getElementById("language-select"),a=document.getElementById("clear-btn"),s=document.getElementById("export-btn"),o=document.getElementById("load-sample");let i;e.addEventListener("click",()=>this.analyzeCode()),a.addEventListener("click",()=>this.clearAll()),s.addEventListener("click",()=>this.exportReport()),o.addEventListener("click",()=>this.loadSample()),t.addEventListener("input",()=>{this.updateStats(),clearTimeout(i),i=setTimeout(()=>this.analyzeCode(),800)}),n.addEventListener("change",()=>{this.loadSample(),setTimeout(()=>this.analyzeCode(),200)}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),this.analyzeCode())})}updateStats(){const e=document.getElementById("code-input").value,t=e.split("\n").length,n=e.length;document.getElementById("line-count").textContent="".concat(t," lines"),document.getElementById("char-count").textContent="".concat(n," characters");const a=(e.match(/\?\.|Temporal\.|\.at\(|Object\.hasOwn|@container|:has\(/gi)||[]).length;document.getElementById("feature-count").textContent="".concat(a," features detected")}async analyzeCode(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=document.getElementById("code-input"),n=document.getElementById("language-select"),a=document.getElementById("results-panel"),s=document.getElementById("analysis-status"),o=t.value.trim(),i=n.value;if(o){e||(s.textContent="Analyzing...",this.showLoading());try{e||await new Promise(e=>setTimeout(e,300));const t=this.analyzer.analyzeCode(o,i);this.currentAnalysis=t,this.displayResults(t),this.updateSidebar(t),a.classList.remove("hidden"),s.textContent=e?"Live analysis":"Found ".concat(t.issues.length," features"),document.getElementById("analysis-time").textContent="Analyzed ".concat(t.metadata.linesOfCode," lines \u2022 ").concat((new Date).toLocaleTimeString())}catch(r){this.showError("Analysis failed: "+r.message),s.textContent="Analysis failed"}}else this.hideResults()}updateSidebar(e){const t=document.getElementById("sidebar-feature-count"),n=document.getElementById("sidebar-risk-level"),a=document.getElementById("sidebar-score"),s=document.getElementById("compatibility-bar");t.textContent=e.issues.length,n.textContent=e.summary.riskLevel.toUpperCase(),a.textContent="".concat(e.summary.compatibilityScore,"/100");n.className="font-bold ".concat({low:"text-green-600",medium:"text-yellow-600",high:"text-red-600"}[e.summary.riskLevel]);const o=e.summary.compatibilityScore,i=o>=80?"bg-green-500":o>=60?"bg-yellow-500":"bg-red-500";s.style.width="".concat(o,"%"),s.className="h-2 rounded-full transition-all duration-500 ".concat(i);const r=o>=80?"text-green-600":o>=60?"text-yellow-600":"text-red-600";a.className="font-bold ".concat(r)}showLoading(){document.getElementById("results-content").innerHTML='\n            <div class="flex items-center justify-center py-12">\n                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>\n                <span class="ml-3 text-gray-600">Analyzing compatibility...</span>\n            </div>\n        '}showError(e){document.getElementById("results-content").innerHTML='\n            <div class="bg-red-50 border border-red-200 rounded-lg p-6">\n                <div class="flex items-center">\n                    <span class="text-red-500 text-xl mr-3">\u26a0\ufe0f</span>\n                    <div>\n                        <h3 class="font-semibold text-red-800">Analysis Error</h3>\n                        <p class="text-red-600">'.concat(e,"</p>\n                    </div>\n                </div>\n            </div>\n        ")}hideResults(){document.getElementById("results-panel").classList.add("hidden"),this.updateSidebar({issues:[],summary:{riskLevel:"low",compatibilityScore:100}})}displayResults(e){const t=document.getElementById("results-content");0!==e.issues.length?t.innerHTML="\n            ".concat(this.renderSummary(e.summary),"\n            ").concat(this.renderIssues(e.issues),"\n            ").concat(this.renderSuggestions(e.suggestions),"\n        "):t.innerHTML=this.renderNoIssues()}renderNoIssues(){return'\n            <div class="text-center py-12">\n                <div class="text-6xl mb-4">\u2705</div>\n                <h3 class="text-xl font-semibold text-gray-800 mb-2">Perfect Compatibility!</h3>\n                <p class="text-gray-600">No modern features detected, or all features are widely supported.</p>\n                <p class="text-sm text-gray-500 mt-2">Try adding some modern JavaScript or CSS features to see the analysis in action.</p>\n            </div>\n        '}renderSummary(e){return'\n            <div class="grid md:grid-cols-3 gap-4 mb-8">\n                <div class="border rounded-lg p-4 '.concat({low:"bg-green-50 border-green-200 text-green-800",medium:"bg-yellow-50 border-yellow-200 text-yellow-800",high:"bg-red-50 border-red-200 text-red-800"}[e.riskLevel],'">\n                    <div class="text-center">\n                        <div class="text-2xl font-bold">').concat(e.riskLevel.toUpperCase(),'</div>\n                        <div class="text-sm opacity-75">Risk Level</div>\n                    </div>\n                </div>\n                <div class="border rounded-lg p-4 bg-blue-50 border-blue-200 text-blue-800">\n                    <div class="text-center">\n                        <div class="text-2xl font-bold">').concat(e.total,'</div>\n                        <div class="text-sm opacity-75">Features Found</div>\n                    </div>\n                </div>\n                <div class="border rounded-lg p-4 bg-purple-50 border-purple-200 text-purple-800">\n                    <div class="text-center">\n                        <div class="text-2xl font-bold">').concat(e.compatibilityScore,'/100</div>\n                        <div class="text-sm opacity-75">Compatibility Score</div>\n                    </div>\n                </div>\n            </div>\n        ')}renderIssues(e){const t=e.reduce((e,t)=>(e[t.feature]||(e[t.feature]=[]),e[t.feature].push(t),e),{}),n=Object.entries(t).map(e=>{let[t,n]=e;const a=n[0],s=n.length;return'\n                <div class="issue-card bg-white border rounded-lg p-6 mb-4 shadow-sm hover:shadow-md transition-shadow">\n                    <div class="flex justify-between items-start mb-4">\n                        <div>\n                            <h3 class="text-lg font-semibold text-gray-800">'.concat(t,'</h3>\n                            <p class="text-sm text-gray-600 mt-1">').concat(a.description||"",'</p>\n                            <div class="flex items-center mt-2">\n                                <span class="status-badge status-').concat(a.status,'">').concat(a.status.replace("-"," "),"</span>\n                                ").concat(s>1?'<span class="ml-2 text-sm text-gray-600">'.concat(s," occurrences</span>"):"","\n                                ").concat(a.group?'<span class="ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">'.concat(a.group.toUpperCase(),"</span>"):"",'\n                            </div>\n                        </div>\n                        <div class="text-right text-sm text-gray-600">\n                            ').concat(a.baseline?"Baseline: ".concat(new Date(a.baseline).toLocaleDateString()):"Not baseline",'\n                        </div>\n                    </div>\n\n                    <div class="browser-support mb-4">\n                        ').concat(Object.entries(a.browsers).map(e=>{let[t,n]=e;return'<span class="browser-badge">'.concat(t,": ").concat(n,"</span>")}).join(""),"\n                    </div>\n\n                    ").concat(n.map(e=>'\n                        <div class="code-occurrence mb-3 p-3 bg-gray-50 rounded border-l-4 border-blue-400">\n                            <div class="text-sm text-gray-600 mb-1">Line '.concat(e.line,", Column ").concat(e.column,'</div>\n                            <code class="text-sm font-mono text-gray-800">').concat(this.escapeHtml(e.code),"</code>\n                        </div>\n                    ")).join(""),"\n\n                    ").concat(this.renderEnhancedFeatureInfo(a),'\n\n                    <div class="mt-4 space-y-2">\n                        ').concat(a.fallback?'\n                            <div class="text-sm">\n                                <span class="font-medium text-gray-700">Fallback:</span>\n                                <span class="text-gray-600">'.concat(a.fallback,"</span>\n                            </div>\n                        "):"","\n                        ").concat(a.polyfill?'\n                            <div class="text-sm">\n                                <span class="font-medium text-gray-700">Polyfill:</span>\n                                <span class="text-gray-600">'.concat(a.polyfill,"</span>\n                            </div>\n                        "):"","\n                        ").concat(a.performance?'\n                            <div class="text-sm">\n                                <span class="font-medium text-gray-700">Performance Impact:</span>\n                                <span class="text-gray-600">'.concat(a.performance.impact," (").concat(a.performance.bundle_size,")</span>\n                            </div>\n                        "):"",'\n                        <div class="flex justify-between items-center">\n                            <a href="').concat(a.mdn,'" target="_blank" class="text-blue-600 hover:text-blue-800 underline text-sm">\n                                \ud83d\udcd6 Learn more on MDN\n                            </a>\n                            ').concat(a.spec?'\n                                <a href="'.concat(a.spec,'" target="_blank" class="text-purple-600 hover:text-purple-800 underline text-sm">\n                                    \ud83d\udccb View Specification\n                                </a>\n                            '):"","\n                        </div>\n                    </div>\n                </div>\n            ")}).join("");return'\n            <div class="mb-8">\n                <h2 class="text-xl font-semibold text-gray-800 mb-4">\ud83d\udd0d Detected Features</h2>\n                '.concat(n,"\n            </div>\n        ")}renderEnhancedFeatureInfo(e){let t="";if(e.usage){const n=e.usage.usage_stats,a=e.usage.developer_sentiment;t+='\n                <div class="bg-blue-50 border border-blue-200 rounded p-3 mb-3">\n                    <div class="text-sm font-medium text-blue-800 mb-2">\ud83d\udcca Usage Statistics</div>\n                    <div class="text-xs text-blue-700 space-y-1">\n                        <div>Adoption: '.concat(n.percentage,"% (").concat(n.trend,")</div>\n                        <div>Developer Satisfaction: ").concat(a.satisfaction,"/5 \u2b50</div>\n                        <div>Growth: ").concat(n.monthly_growth>0?"+":"").concat(n.monthly_growth,"% monthly</div>\n                    </div>\n                </div>\n            ")}if(e.community){const n=e.community;t+='\n                <div class="bg-green-50 border border-green-200 rounded p-3 mb-3">\n                    <div class="text-sm font-medium text-green-800 mb-2">\ud83c\udf1f Community Feedback</div>\n                    <div class="text-xs text-green-700 space-y-1">\n                        <div>Rating: '.concat(n.rating,"/5 (").concat(n.votes," votes)</div>\n                        <div>Success Stories: ").concat(n.success_stories,"</div>\n                        ").concat(n.issues_reported>0?"<div>Issues Reported: ".concat(n.issues_reported,"</div>"):"","\n                    </div>\n                </div>\n            ")}return t}renderSuggestions(e){if(0===e.length)return"";const t=e.map(e=>'\n                <div class="border rounded-lg p-4 '.concat({error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",fix:"bg-blue-50 border-blue-200 text-blue-800"}[e.type],' mb-3">\n                    <div class="flex items-start">\n                        <span class="text-xl mr-3">').concat({error:"\ud83d\udea8",warning:"\u26a0\ufe0f",fix:"\ud83d\udd27"}[e.type],'</span>\n                        <div>\n                            <div class="font-medium">').concat(e.message,'</div>\n                            <div class="text-sm opacity-75 mt-1">').concat(e.action,"</div>\n                        </div>\n                    </div>\n                </div>\n            ")).join("");return'\n            <div>\n                <h2 class="text-xl font-semibold text-gray-800 mb-4">\ud83d\udca1 Recommendations</h2>\n                '.concat(t,"\n            </div>\n        ")}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}loadTemplate(e){const t=document.getElementById("code-input"),n=document.getElementById("language-select");this.templates[e]&&(t.value=this.templates[e],e.includes("css")?n.value="css":e.includes("html")?n.value="html":n.value="javascript",this.updateStats(),setTimeout(()=>this.analyzeCode(),100))}loadSample(){const e=document.getElementById("language-select").value;this.loadTemplate({javascript:"modern-js",css:"css-features",html:"html5-features"}[e])}clearAll(){document.getElementById("code-input").value="",this.hideResults(),this.updateStats(),document.getElementById("analysis-status").textContent=""}clearAnalysis(){this.hideResults(),document.getElementById("analysis-status").textContent=""}exportReport(){if(!this.currentAnalysis)return void alert("No analysis results to export. Please analyze some code first.");const e=this.generateReport(this.currentAnalysis),t=new Blob([e],{type:"text/markdown"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="baseline-copilot-report-".concat((new Date).toISOString().split("T")[0],".md"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}generateReport(e){const t=(new Date).toLocaleDateString(),n=(new Date).toLocaleTimeString();return"# Browser Compatibility Analysis Report\n\nGenerated by Baseline Copilot on ".concat(t," at ").concat(n,"\n\n## Summary\n\n- **Features Detected**: ").concat(e.summary.total,"\n- **Risk Level**: ").concat(e.summary.riskLevel.toUpperCase(),"\n- **Compatibility Score**: ").concat(e.summary.compatibilityScore,"/100\n\n## Feature Details\n\n").concat(e.issues.map(e=>"\n### ".concat(e.feature,"\n\n- **Status**: ").concat(e.status.replace("-"," "),"\n- **Baseline Date**: ").concat(e.baseline||"Not baseline","\n- **Line**: ").concat(e.line,", Column: ").concat(e.column,"\n- **Code**: `").concat(e.code,"`\n\n**Browser Support**:\n").concat(Object.entries(e.browsers).map(e=>{let[t,n]=e;return"- ".concat(t,": ").concat(n)}).join("\n"),"\n\n").concat(e.fallback?"**Fallback**: ".concat(e.fallback):"","\n").concat(e.polyfill?"**Polyfill**: ".concat(e.polyfill):"","\n\n**Documentation**: [MDN Reference](").concat(e.mdn,")\n\n---\n")).join(""),"\n\n## Recommendations\n\n").concat(e.suggestions.map(e=>"\n- **".concat(e.type.toUpperCase(),"**: ").concat(e.message,"\n  - Action: ").concat(e.action,"\n")).join(""),"\n\n---\n*Report generated by Baseline Copilot - Browser Compatibility Dashboard*\n")}}let n;document.addEventListener("DOMContentLoaded",()=>{n=new t}),window.loadTemplate=e=>{var t;return null===(t=n)||void 0===t?void 0:t.loadTemplate(e)},window.clearAnalysis=()=>{var e;return null===(e=n)||void 0===e?void 0:e.clearAnalysis()}})();
//# sourceMappingURL=main.2cce3d00.js.map